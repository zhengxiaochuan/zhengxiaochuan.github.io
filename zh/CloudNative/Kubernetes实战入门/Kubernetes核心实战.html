<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kubernetes核心实战 | 狸猫小僧</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="记录点滴足迹  保留美好时光">
    
    <link rel="preload" href="/assets/css/0.styles.89e32c3d.css" as="style"><link rel="preload" href="/assets/js/app.fd7d1168.js" as="script"><link rel="preload" href="/assets/js/5.8188c8a3.js" as="script"><link rel="preload" href="/assets/js/34.8c034219.js" as="script"><link rel="prefetch" href="/assets/js/10.5efc25fb.js"><link rel="prefetch" href="/assets/js/100.2365220c.js"><link rel="prefetch" href="/assets/js/101.7dc95f84.js"><link rel="prefetch" href="/assets/js/102.668abbc6.js"><link rel="prefetch" href="/assets/js/103.4711787a.js"><link rel="prefetch" href="/assets/js/104.9c31f74c.js"><link rel="prefetch" href="/assets/js/105.eae619f3.js"><link rel="prefetch" href="/assets/js/106.91fadf69.js"><link rel="prefetch" href="/assets/js/107.df2c7348.js"><link rel="prefetch" href="/assets/js/108.a8a3a823.js"><link rel="prefetch" href="/assets/js/109.af72ccbe.js"><link rel="prefetch" href="/assets/js/11.5daa4268.js"><link rel="prefetch" href="/assets/js/110.5e268b5f.js"><link rel="prefetch" href="/assets/js/111.b1fc7cda.js"><link rel="prefetch" href="/assets/js/112.ef44a073.js"><link rel="prefetch" href="/assets/js/113.6fe9aa70.js"><link rel="prefetch" href="/assets/js/114.08728c80.js"><link rel="prefetch" href="/assets/js/115.3889b46f.js"><link rel="prefetch" href="/assets/js/116.3fc5af23.js"><link rel="prefetch" href="/assets/js/117.6813af12.js"><link rel="prefetch" href="/assets/js/118.f082dcb3.js"><link rel="prefetch" href="/assets/js/119.ae3e4d3b.js"><link rel="prefetch" href="/assets/js/12.3a02d4dc.js"><link rel="prefetch" href="/assets/js/120.febf0262.js"><link rel="prefetch" href="/assets/js/121.991c7b25.js"><link rel="prefetch" href="/assets/js/122.8bb46ec5.js"><link rel="prefetch" href="/assets/js/123.dc209fc9.js"><link rel="prefetch" href="/assets/js/124.0337013a.js"><link rel="prefetch" href="/assets/js/125.4cc003c8.js"><link rel="prefetch" href="/assets/js/126.24d4de8e.js"><link rel="prefetch" href="/assets/js/127.060b364e.js"><link rel="prefetch" href="/assets/js/128.eecf8a8d.js"><link rel="prefetch" href="/assets/js/129.2c476cfc.js"><link rel="prefetch" href="/assets/js/13.86c9671d.js"><link rel="prefetch" href="/assets/js/130.74773727.js"><link rel="prefetch" href="/assets/js/131.0d2c7e45.js"><link rel="prefetch" href="/assets/js/132.3983b867.js"><link rel="prefetch" href="/assets/js/133.563acb6a.js"><link rel="prefetch" href="/assets/js/134.d5e19b37.js"><link rel="prefetch" href="/assets/js/135.9079aab2.js"><link rel="prefetch" href="/assets/js/136.e43d5956.js"><link rel="prefetch" href="/assets/js/137.32a9c7ad.js"><link rel="prefetch" href="/assets/js/138.3163c2ac.js"><link rel="prefetch" href="/assets/js/139.c19c678c.js"><link rel="prefetch" href="/assets/js/14.3fa80602.js"><link rel="prefetch" href="/assets/js/140.cb7bf08b.js"><link rel="prefetch" href="/assets/js/141.d282ed08.js"><link rel="prefetch" href="/assets/js/142.60fb950b.js"><link rel="prefetch" href="/assets/js/143.c7fa8a77.js"><link rel="prefetch" href="/assets/js/144.0ac55427.js"><link rel="prefetch" href="/assets/js/145.e7dca70c.js"><link rel="prefetch" href="/assets/js/146.e5c89bf1.js"><link rel="prefetch" href="/assets/js/147.ad8702e4.js"><link rel="prefetch" href="/assets/js/148.f2131fa6.js"><link rel="prefetch" href="/assets/js/149.950a6c8a.js"><link rel="prefetch" href="/assets/js/15.608f6176.js"><link rel="prefetch" href="/assets/js/150.d2265821.js"><link rel="prefetch" href="/assets/js/151.9cedca96.js"><link rel="prefetch" href="/assets/js/152.0b9d1ef6.js"><link rel="prefetch" href="/assets/js/153.88011a76.js"><link rel="prefetch" href="/assets/js/154.424b16d1.js"><link rel="prefetch" href="/assets/js/155.b2899f2d.js"><link rel="prefetch" href="/assets/js/156.a8d8aa97.js"><link rel="prefetch" href="/assets/js/157.fb21de37.js"><link rel="prefetch" href="/assets/js/158.07429d07.js"><link rel="prefetch" href="/assets/js/159.bf1a56e4.js"><link rel="prefetch" href="/assets/js/16.dba563e1.js"><link rel="prefetch" href="/assets/js/160.cf6233e1.js"><link rel="prefetch" href="/assets/js/161.30f5ff81.js"><link rel="prefetch" href="/assets/js/162.471a5fc5.js"><link rel="prefetch" href="/assets/js/163.47bfac71.js"><link rel="prefetch" href="/assets/js/164.b6e9f622.js"><link rel="prefetch" href="/assets/js/165.9064fa22.js"><link rel="prefetch" href="/assets/js/166.55cfc286.js"><link rel="prefetch" href="/assets/js/167.6e461517.js"><link rel="prefetch" href="/assets/js/168.c8ffaeac.js"><link rel="prefetch" href="/assets/js/169.07bff66e.js"><link rel="prefetch" href="/assets/js/17.99c724e6.js"><link rel="prefetch" href="/assets/js/170.0c2ccae0.js"><link rel="prefetch" href="/assets/js/171.c2764740.js"><link rel="prefetch" href="/assets/js/172.466bd875.js"><link rel="prefetch" href="/assets/js/173.b698c502.js"><link rel="prefetch" href="/assets/js/174.8cb5165a.js"><link rel="prefetch" href="/assets/js/175.43e2e98e.js"><link rel="prefetch" href="/assets/js/176.30f5ec79.js"><link rel="prefetch" href="/assets/js/177.41e9f5b7.js"><link rel="prefetch" href="/assets/js/178.626a00c9.js"><link rel="prefetch" href="/assets/js/179.ec1f02ee.js"><link rel="prefetch" href="/assets/js/18.a465d68f.js"><link rel="prefetch" href="/assets/js/180.ef1eb477.js"><link rel="prefetch" href="/assets/js/181.2c9bc20e.js"><link rel="prefetch" href="/assets/js/182.5c317e34.js"><link rel="prefetch" href="/assets/js/183.3735c423.js"><link rel="prefetch" href="/assets/js/184.7954fbf0.js"><link rel="prefetch" href="/assets/js/185.14882539.js"><link rel="prefetch" href="/assets/js/186.ebcc2c13.js"><link rel="prefetch" href="/assets/js/187.1885217e.js"><link rel="prefetch" href="/assets/js/188.2a281c2d.js"><link rel="prefetch" href="/assets/js/189.f3a4b5fa.js"><link rel="prefetch" href="/assets/js/19.9f30faef.js"><link rel="prefetch" href="/assets/js/190.4df3822c.js"><link rel="prefetch" href="/assets/js/191.fcb3f7b2.js"><link rel="prefetch" href="/assets/js/192.410dad49.js"><link rel="prefetch" href="/assets/js/193.69116851.js"><link rel="prefetch" href="/assets/js/194.3ed49967.js"><link rel="prefetch" href="/assets/js/195.6f61bba3.js"><link rel="prefetch" href="/assets/js/196.8f6e25a7.js"><link rel="prefetch" href="/assets/js/197.000d9666.js"><link rel="prefetch" href="/assets/js/198.2473b124.js"><link rel="prefetch" href="/assets/js/199.550727a1.js"><link rel="prefetch" href="/assets/js/20.35fbb8b5.js"><link rel="prefetch" href="/assets/js/200.1978994f.js"><link rel="prefetch" href="/assets/js/201.6377ffcd.js"><link rel="prefetch" href="/assets/js/202.3888d5b7.js"><link rel="prefetch" href="/assets/js/203.27b6370e.js"><link rel="prefetch" href="/assets/js/204.339588e3.js"><link rel="prefetch" href="/assets/js/205.3ca7975e.js"><link rel="prefetch" href="/assets/js/206.154ce927.js"><link rel="prefetch" href="/assets/js/207.ae015e56.js"><link rel="prefetch" href="/assets/js/208.0ac1810b.js"><link rel="prefetch" href="/assets/js/209.95e81b11.js"><link rel="prefetch" href="/assets/js/21.5a3c8cda.js"><link rel="prefetch" href="/assets/js/210.530259e0.js"><link rel="prefetch" href="/assets/js/211.7d3b4f86.js"><link rel="prefetch" href="/assets/js/212.c2bbbf97.js"><link rel="prefetch" href="/assets/js/213.e57701e4.js"><link rel="prefetch" href="/assets/js/214.13083434.js"><link rel="prefetch" href="/assets/js/215.50bac1a7.js"><link rel="prefetch" href="/assets/js/216.de8db778.js"><link rel="prefetch" href="/assets/js/217.b0783229.js"><link rel="prefetch" href="/assets/js/218.33317dc4.js"><link rel="prefetch" href="/assets/js/219.7a51ea2c.js"><link rel="prefetch" href="/assets/js/22.f7900f46.js"><link rel="prefetch" href="/assets/js/220.b34df14d.js"><link rel="prefetch" href="/assets/js/221.7d1fac29.js"><link rel="prefetch" href="/assets/js/222.8f3a8c90.js"><link rel="prefetch" href="/assets/js/223.c5443f55.js"><link rel="prefetch" href="/assets/js/224.fd1e776f.js"><link rel="prefetch" href="/assets/js/225.32036420.js"><link rel="prefetch" href="/assets/js/226.72b07dee.js"><link rel="prefetch" href="/assets/js/227.61a3b305.js"><link rel="prefetch" href="/assets/js/228.3fd39553.js"><link rel="prefetch" href="/assets/js/229.0eb71bb4.js"><link rel="prefetch" href="/assets/js/23.76e85425.js"><link rel="prefetch" href="/assets/js/230.d2fd9461.js"><link rel="prefetch" href="/assets/js/231.8f2b1878.js"><link rel="prefetch" href="/assets/js/232.c74d3cfd.js"><link rel="prefetch" href="/assets/js/233.ca68325f.js"><link rel="prefetch" href="/assets/js/234.b7021eb7.js"><link rel="prefetch" href="/assets/js/235.5fbbe5a8.js"><link rel="prefetch" href="/assets/js/236.09faaa4a.js"><link rel="prefetch" href="/assets/js/237.c4c27b11.js"><link rel="prefetch" href="/assets/js/238.f2379661.js"><link rel="prefetch" href="/assets/js/239.2a2ffd3e.js"><link rel="prefetch" href="/assets/js/24.8abae6d7.js"><link rel="prefetch" href="/assets/js/240.614b1aea.js"><link rel="prefetch" href="/assets/js/241.d43daf1d.js"><link rel="prefetch" href="/assets/js/242.b2a2c494.js"><link rel="prefetch" href="/assets/js/243.103b4b75.js"><link rel="prefetch" href="/assets/js/244.a5cf1546.js"><link rel="prefetch" href="/assets/js/245.3473d532.js"><link rel="prefetch" href="/assets/js/246.4e490c6f.js"><link rel="prefetch" href="/assets/js/247.1273ff7b.js"><link rel="prefetch" href="/assets/js/248.fb1b51c6.js"><link rel="prefetch" href="/assets/js/249.131e1f43.js"><link rel="prefetch" href="/assets/js/25.cd40fdc6.js"><link rel="prefetch" href="/assets/js/250.9d5a6ea9.js"><link rel="prefetch" href="/assets/js/251.06a49f61.js"><link rel="prefetch" href="/assets/js/252.8c317cd1.js"><link rel="prefetch" href="/assets/js/253.ba7e2ae2.js"><link rel="prefetch" href="/assets/js/254.41d51d7c.js"><link rel="prefetch" href="/assets/js/255.fdb2d893.js"><link rel="prefetch" href="/assets/js/256.7d965f53.js"><link rel="prefetch" href="/assets/js/257.de36c834.js"><link rel="prefetch" href="/assets/js/258.76d744b3.js"><link rel="prefetch" href="/assets/js/259.d32c111f.js"><link rel="prefetch" href="/assets/js/26.1a1717f0.js"><link rel="prefetch" href="/assets/js/260.725aa988.js"><link rel="prefetch" href="/assets/js/261.0113a3db.js"><link rel="prefetch" href="/assets/js/262.4ba80064.js"><link rel="prefetch" href="/assets/js/263.bf55c723.js"><link rel="prefetch" href="/assets/js/264.8ed99bc0.js"><link rel="prefetch" href="/assets/js/265.3231df29.js"><link rel="prefetch" href="/assets/js/266.a66b8d5f.js"><link rel="prefetch" href="/assets/js/267.de7744c9.js"><link rel="prefetch" href="/assets/js/268.cf69ef86.js"><link rel="prefetch" href="/assets/js/269.83de3918.js"><link rel="prefetch" href="/assets/js/27.7c945152.js"><link rel="prefetch" href="/assets/js/270.6abb67d4.js"><link rel="prefetch" href="/assets/js/271.ef79848f.js"><link rel="prefetch" href="/assets/js/272.c3a8f537.js"><link rel="prefetch" href="/assets/js/273.9f06c48f.js"><link rel="prefetch" href="/assets/js/274.5589933d.js"><link rel="prefetch" href="/assets/js/275.731bc5b7.js"><link rel="prefetch" href="/assets/js/276.28040273.js"><link rel="prefetch" href="/assets/js/277.bb360099.js"><link rel="prefetch" href="/assets/js/278.ab1ffdb2.js"><link rel="prefetch" href="/assets/js/279.760b345e.js"><link rel="prefetch" href="/assets/js/28.1424aae1.js"><link rel="prefetch" href="/assets/js/280.51770d82.js"><link rel="prefetch" href="/assets/js/281.1d79fec6.js"><link rel="prefetch" href="/assets/js/282.7691378f.js"><link rel="prefetch" href="/assets/js/283.2a209993.js"><link rel="prefetch" href="/assets/js/284.d85be3fc.js"><link rel="prefetch" href="/assets/js/285.f8dfd0b3.js"><link rel="prefetch" href="/assets/js/286.816c2136.js"><link rel="prefetch" href="/assets/js/287.b999d89f.js"><link rel="prefetch" href="/assets/js/288.b20f933e.js"><link rel="prefetch" href="/assets/js/289.9e35f6a0.js"><link rel="prefetch" href="/assets/js/29.4c235136.js"><link rel="prefetch" href="/assets/js/290.20c9f2db.js"><link rel="prefetch" href="/assets/js/291.7da9a608.js"><link rel="prefetch" href="/assets/js/292.dca1caeb.js"><link rel="prefetch" href="/assets/js/293.8c24c009.js"><link rel="prefetch" href="/assets/js/294.2abdc3db.js"><link rel="prefetch" href="/assets/js/295.d6a3adad.js"><link rel="prefetch" href="/assets/js/296.2adaff35.js"><link rel="prefetch" href="/assets/js/297.5e978c4a.js"><link rel="prefetch" href="/assets/js/298.8069001c.js"><link rel="prefetch" href="/assets/js/299.34e63889.js"><link rel="prefetch" href="/assets/js/3.70395677.js"><link rel="prefetch" href="/assets/js/30.a38b3c0c.js"><link rel="prefetch" href="/assets/js/300.31f8aaf6.js"><link rel="prefetch" href="/assets/js/301.f7203d80.js"><link rel="prefetch" href="/assets/js/302.b3d80be5.js"><link rel="prefetch" href="/assets/js/303.7a857ce2.js"><link rel="prefetch" href="/assets/js/304.f90d83b5.js"><link rel="prefetch" href="/assets/js/305.fa61808c.js"><link rel="prefetch" href="/assets/js/306.05a2581c.js"><link rel="prefetch" href="/assets/js/307.fef2c80f.js"><link rel="prefetch" href="/assets/js/308.c60ae19d.js"><link rel="prefetch" href="/assets/js/309.9c6cdeb9.js"><link rel="prefetch" href="/assets/js/31.8a3e8cc0.js"><link rel="prefetch" href="/assets/js/310.6286a1b4.js"><link rel="prefetch" href="/assets/js/311.12348d9f.js"><link rel="prefetch" href="/assets/js/312.9264fa0d.js"><link rel="prefetch" href="/assets/js/313.ddba82b5.js"><link rel="prefetch" href="/assets/js/314.ae38627f.js"><link rel="prefetch" href="/assets/js/315.f828e73e.js"><link rel="prefetch" href="/assets/js/316.119ada3f.js"><link rel="prefetch" href="/assets/js/317.ba2ede70.js"><link rel="prefetch" href="/assets/js/318.0d3e1bab.js"><link rel="prefetch" href="/assets/js/319.d060df8b.js"><link rel="prefetch" href="/assets/js/32.41f36fdb.js"><link rel="prefetch" href="/assets/js/320.2f61a3ed.js"><link rel="prefetch" href="/assets/js/321.7bcb6e4e.js"><link rel="prefetch" href="/assets/js/322.3c8c2b63.js"><link rel="prefetch" href="/assets/js/323.5521c9d0.js"><link rel="prefetch" href="/assets/js/324.8437d6ad.js"><link rel="prefetch" href="/assets/js/325.2bef158e.js"><link rel="prefetch" href="/assets/js/326.10f510da.js"><link rel="prefetch" href="/assets/js/327.e162cc9b.js"><link rel="prefetch" href="/assets/js/328.2b06d94a.js"><link rel="prefetch" href="/assets/js/329.561f32eb.js"><link rel="prefetch" href="/assets/js/33.55ef9183.js"><link rel="prefetch" href="/assets/js/330.e802dbbd.js"><link rel="prefetch" href="/assets/js/331.88ba6528.js"><link rel="prefetch" href="/assets/js/332.349431e9.js"><link rel="prefetch" href="/assets/js/333.31d0d56d.js"><link rel="prefetch" href="/assets/js/334.763ceda4.js"><link rel="prefetch" href="/assets/js/335.17a450df.js"><link rel="prefetch" href="/assets/js/336.6e99a6c4.js"><link rel="prefetch" href="/assets/js/337.7300a8a1.js"><link rel="prefetch" href="/assets/js/338.8c4badb1.js"><link rel="prefetch" href="/assets/js/339.ce2817fb.js"><link rel="prefetch" href="/assets/js/340.9334b73a.js"><link rel="prefetch" href="/assets/js/341.99e5ae47.js"><link rel="prefetch" href="/assets/js/342.e12e4706.js"><link rel="prefetch" href="/assets/js/343.bfc6b8fb.js"><link rel="prefetch" href="/assets/js/344.461f2dd0.js"><link rel="prefetch" href="/assets/js/345.ec6ee553.js"><link rel="prefetch" href="/assets/js/346.9fcdd8f2.js"><link rel="prefetch" href="/assets/js/347.55f7e455.js"><link rel="prefetch" href="/assets/js/348.fd77ba8d.js"><link rel="prefetch" href="/assets/js/349.74108f90.js"><link rel="prefetch" href="/assets/js/35.49c875bb.js"><link rel="prefetch" href="/assets/js/350.ed54e76d.js"><link rel="prefetch" href="/assets/js/351.d021fc45.js"><link rel="prefetch" href="/assets/js/352.ceb13107.js"><link rel="prefetch" href="/assets/js/353.9c6e59fc.js"><link rel="prefetch" href="/assets/js/354.7bb11f5f.js"><link rel="prefetch" href="/assets/js/355.666beb97.js"><link rel="prefetch" href="/assets/js/356.f41f057b.js"><link rel="prefetch" href="/assets/js/36.a7843c2f.js"><link rel="prefetch" href="/assets/js/37.430742bd.js"><link rel="prefetch" href="/assets/js/38.d190213c.js"><link rel="prefetch" href="/assets/js/39.86d33c09.js"><link rel="prefetch" href="/assets/js/4.20d62a93.js"><link rel="prefetch" href="/assets/js/40.d1ce04c6.js"><link rel="prefetch" href="/assets/js/41.3ed5ffa1.js"><link rel="prefetch" href="/assets/js/42.bec123d0.js"><link rel="prefetch" href="/assets/js/43.7db6fe10.js"><link rel="prefetch" href="/assets/js/44.593ee985.js"><link rel="prefetch" href="/assets/js/45.b8d850d1.js"><link rel="prefetch" href="/assets/js/46.4e4bef9e.js"><link rel="prefetch" href="/assets/js/47.087b1f4d.js"><link rel="prefetch" href="/assets/js/48.0ce2743d.js"><link rel="prefetch" href="/assets/js/49.8f157751.js"><link rel="prefetch" href="/assets/js/50.da608c2b.js"><link rel="prefetch" href="/assets/js/51.26324433.js"><link rel="prefetch" href="/assets/js/52.dabac7fa.js"><link rel="prefetch" href="/assets/js/53.8df831bd.js"><link rel="prefetch" href="/assets/js/54.3d914f41.js"><link rel="prefetch" href="/assets/js/55.f7713637.js"><link rel="prefetch" href="/assets/js/56.e8a95ed9.js"><link rel="prefetch" href="/assets/js/57.99f9071d.js"><link rel="prefetch" href="/assets/js/58.92842dbe.js"><link rel="prefetch" href="/assets/js/59.d9e6cea2.js"><link rel="prefetch" href="/assets/js/6.e8358ecb.js"><link rel="prefetch" href="/assets/js/60.62e4e6fc.js"><link rel="prefetch" href="/assets/js/61.a135170d.js"><link rel="prefetch" href="/assets/js/62.bc724627.js"><link rel="prefetch" href="/assets/js/63.45aac216.js"><link rel="prefetch" href="/assets/js/64.2993f50d.js"><link rel="prefetch" href="/assets/js/65.93592a18.js"><link rel="prefetch" href="/assets/js/66.0014bfa0.js"><link rel="prefetch" href="/assets/js/67.06bdb67d.js"><link rel="prefetch" href="/assets/js/68.b5baecde.js"><link rel="prefetch" href="/assets/js/69.453c4aa4.js"><link rel="prefetch" href="/assets/js/7.2a1566c4.js"><link rel="prefetch" href="/assets/js/70.0f974374.js"><link rel="prefetch" href="/assets/js/71.577b381c.js"><link rel="prefetch" href="/assets/js/72.ddee11d5.js"><link rel="prefetch" href="/assets/js/73.30433f94.js"><link rel="prefetch" href="/assets/js/74.dfade33e.js"><link rel="prefetch" href="/assets/js/75.05899d44.js"><link rel="prefetch" href="/assets/js/76.06e9db21.js"><link rel="prefetch" href="/assets/js/77.42dbb140.js"><link rel="prefetch" href="/assets/js/78.0a28dff4.js"><link rel="prefetch" href="/assets/js/79.d9c8b827.js"><link rel="prefetch" href="/assets/js/8.c2f2fc17.js"><link rel="prefetch" href="/assets/js/80.3a8d41f6.js"><link rel="prefetch" href="/assets/js/81.df17d28e.js"><link rel="prefetch" href="/assets/js/82.c51860b7.js"><link rel="prefetch" href="/assets/js/83.84d57fa5.js"><link rel="prefetch" href="/assets/js/84.3d0659ab.js"><link rel="prefetch" href="/assets/js/85.d0cdbcbd.js"><link rel="prefetch" href="/assets/js/86.a01d4cb3.js"><link rel="prefetch" href="/assets/js/87.fac4a95e.js"><link rel="prefetch" href="/assets/js/88.019abf7d.js"><link rel="prefetch" href="/assets/js/89.8a272cbe.js"><link rel="prefetch" href="/assets/js/9.54693f65.js"><link rel="prefetch" href="/assets/js/90.78e38bd8.js"><link rel="prefetch" href="/assets/js/91.e6fc4d97.js"><link rel="prefetch" href="/assets/js/92.c76d8caa.js"><link rel="prefetch" href="/assets/js/93.f452fbfa.js"><link rel="prefetch" href="/assets/js/94.b8148d22.js"><link rel="prefetch" href="/assets/js/95.6c9c242e.js"><link rel="prefetch" href="/assets/js/96.ebcb67dc.js"><link rel="prefetch" href="/assets/js/97.51960647.js"><link rel="prefetch" href="/assets/js/98.f1d7b3d5.js"><link rel="prefetch" href="/assets/js/99.2cfad927.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b18024e9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.89e32c3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">狸猫小僧</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/zh/DevBasic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/zh/DevAdvance/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="/zh/CloudNative/" class="nav-link router-link-active">
  云原生
</a></div><div class="nav-item"><a href="/zh/Frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/zh/Media/" class="nav-link">
  多媒体
</a></div><div class="nav-item"><a href="/zh/DevOthers/" class="nav-link">
  杂谈
</a></div><div class="nav-item"><a href="/zh/article/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/zhengxiaochuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    官网
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/zh/DevBasic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/zh/DevAdvance/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="/zh/CloudNative/" class="nav-link router-link-active">
  云原生
</a></div><div class="nav-item"><a href="/zh/Frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/zh/Media/" class="nav-link">
  多媒体
</a></div><div class="nav-item"><a href="/zh/DevOthers/" class="nav-link">
  杂谈
</a></div><div class="nav-item"><a href="/zh/article/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/zhengxiaochuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    官网
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云平台核心</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Kubernetes实战入门</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes基础概念.html" class="sidebar-link">1、Kubernetes是什么</a></li><li><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html" class="active sidebar-link">Kubernetes核心实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、多副本" class="sidebar-link">1、多副本</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、扩缩容" class="sidebar-link">2、扩缩容</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_3、自愈-故障转移" class="sidebar-link">3、自愈&amp;故障转移</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_4、滚动更新" class="sidebar-link">4、滚动更新</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_5、版本回退" class="sidebar-link">5、版本回退</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、clusterip" class="sidebar-link">1、ClusterIP</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、nodeport" class="sidebar-link">2、NodePort</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、安装" class="sidebar-link">1、安装</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、使用" class="sidebar-link">2、使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#测试环境" class="sidebar-link">测试环境</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、域名访问" class="sidebar-link">1、域名访问</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、路径重写" class="sidebar-link">2、路径重写</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_3、流量限制" class="sidebar-link">3、流量限制</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#环境准备" class="sidebar-link">环境准备</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、pv-pvc" class="sidebar-link">1、PV&amp;PVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_1、创建pv池" class="sidebar-link">1、创建pv池</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、pvc创建与绑定" class="sidebar-link">2、PVC创建与绑定</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_2、configmap" class="sidebar-link">2、ConfigMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#redis示例" class="sidebar-link">redis示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#_3、secret" class="sidebar-link">3、Secret</a></li><li class="sidebar-sub-header"><a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes核心实战.html#附录" class="sidebar-link">附录</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>KubeSphere平台安装</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>KubeSphere实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云原生DevOps基础与实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务基础与实战</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="kubernetes核心实战"><a href="#kubernetes核心实战" class="header-anchor">#</a> Kubernetes核心实战</h1> <h1 id="_1、资源创建方式"><a href="#_1、资源创建方式" class="header-anchor">#</a> 1、资源创建方式</h1> <ul><li>命令行</li> <li>YAML</li></ul> <h1 id="_2、namespace"><a href="#_2、namespace" class="header-anchor">#</a> 2、Namespace</h1> <p>名称空间：用来对集群资源进行隔离划分。默认只隔离资源，不隔离网络。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl create ns hello
kubectl delete ns hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用配置文件创建名称空间，以<code>hello.yaml</code>文件为例，内容如下：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Namespace
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>创建时使用命令：<code>kubectl apply -f hello.yaml</code></p> <p>删除时使用命令：<code>kubectl delete -f hello.yaml</code></p> <h1 id="_3、pod"><a href="#_3、pod" class="header-anchor">#</a> 3、Pod</h1> <p>运行中的一组容器，Pod是kubernetes中应用的最小单位。</p> <p><img src="/assets/img/1625484036923-09a15ef3-33dc-4e29-91e4-e7fbc69070ce.2eea6a7a.png" alt="img"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建Pod</span>
kubectl run mynginx --image<span class="token operator">=</span>nginx

<span class="token comment"># 查看default名称空间下的Pod</span>
kubectl get pod 
<span class="token comment"># 监控Pod</span>
kubectl get pod -w

<span class="token comment"># 描述</span>
kubectl describe pod 你自己的Pod名字
<span class="token comment"># 删除(默认空间下的Pod)</span>
kubectl delete pod Pod名字
<span class="token comment"># 删除指定名称空间下的Pod</span>
kubectl delete pod Pod名字 -n 名称空间

<span class="token comment"># 查看Pod的运行日志</span>
kubectl logs Pod名字

<span class="token comment"># 每个Pod - k8s都会分配一个ip</span>
kubectl get pod -owide
<span class="token comment"># 使用Pod的ip+pod里面运行容器的端口</span>
<span class="token function">curl</span> <span class="token number">192.168</span>.169.136

<span class="token comment"># 进入到Pod内部并进行交互</span>
kubectl <span class="token builtin class-name">exec</span> -it Pod名字 -- /bin/bash


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>使用配置文件创建Pod，集群中的任意一个机器以及任意的应用都能通过Pod分配的ip来访问这个Pod</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">run</span><span class="token punctuation">:</span> mynginx
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mynginx
<span class="token comment">#  namespace: default</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">name</span><span class="token punctuation">:</span> mynginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>创建一个Pod，并且Pod中包含多个容器。Pod中的多个容器，他们是共享网络空间和共享存储的。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">run</span><span class="token punctuation">:</span> myapp
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>8.5.68
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1613913/1625553938232-51976552-5bab-4c98-bb8d-c4bf612bf866.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_15%2Ctext_YXRndWlndS5jb20gIOWwmuehheiwtw%3D%3D%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p>*<strong>此时的应用还不能外部访问*</strong></p> <h1 id="_4、deployment"><a href="#_4、deployment" class="header-anchor">#</a> 4、Deployment</h1> <p>控制Pod，使Pod拥有多副本，自愈，扩缩容等能力</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 清除所有Pod，比较下面两个命令有何不同效果？</span>
kubectl run mynginx --image<span class="token operator">=</span>nginx

kubectl create deployment mytomcat --image<span class="token operator">=</span>tomcat:8.5.68
<span class="token comment"># 使用Deployment部署产生的Pod，我们删除Pod后，系统会自动再创建一个Pod，也就是说Pod具有自愈能力</span>
kubectl delete pod mytomcat-6f5f895f4f-dwtks
<span class="token comment"># 自愈能力</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>创建Deployment使用如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl create deployment mytomcat --image<span class="token operator">=</span>tomcat:8.5.68
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看Deployment</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get deploy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除Deployment使用如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl delete deployment mytomcat
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_1、多副本"><a href="#_1、多副本" class="header-anchor">#</a> 1、多副本</h2> <p>通过命令行方式创建：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl create deployment my-dep --image<span class="token operator">=</span>nginx --replicas<span class="token operator">=</span><span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以通过配置文件方式来创建</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_2、扩缩容"><a href="#_2、扩缩容" class="header-anchor">#</a> 2、扩缩容</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#使用命令直接修改副本数</span>
kubectl scale deployment/my-dep --replicas<span class="token operator">=</span><span class="token number">5</span> 

<span class="token comment">#也可以通过以下命令，来修改配置文件中的replicas，修改成想要的副本数</span>
kubectl edit deployment my-dep
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_3、自愈-故障转移"><a href="#_3、自愈-故障转移" class="header-anchor">#</a> 3、自愈&amp;故障转移</h2> <ul><li><p>停机</p></li> <li><p>删除Pod</p></li> <li><p>容器崩溃</p></li> <li><p>....</p></li></ul> <h2 id="_4、滚动更新"><a href="#_4、滚动更新" class="header-anchor">#</a> 4、滚动更新</h2> <p>可以使用以下命令查看指定的Deployment都使用了哪些镜像的哪些版本（以yaml文件的形式输出）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get deploy my-dep -oyaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后使用以下命令对Deployment中的镜像进行版本升级【nginx=nginx:1.16.1配置中的nginx这个key是该Deployment中的容器名称】</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">set</span> image deployment/my-dep <span class="token assign-left variable">nginx</span><span class="token operator">=</span>nginx:1.16.1 --record
kubectl rollout status deployment/my-dep
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>运行之后，就会看到K8s会先创建新的Pod，然后杀掉老的Pod，也就达到了滚动更新的效果。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 修改 kubectl edit deployment/my-dep</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5、版本回退"><a href="#_5、版本回退" class="header-anchor">#</a> 5、版本回退</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查看历史记录(主要就是查看REVISION)</span>
kubectl rollout <span class="token function">history</span> deployment/my-dep


<span class="token comment">#查看某个历史详情</span>
kubectl rollout <span class="token function">history</span> deployment/my-dep --revision<span class="token operator">=</span><span class="token number">2</span>

<span class="token comment">#回滚(回到上次)</span>
kubectl rollout undo deployment/my-dep

<span class="token comment">#回滚(回到指定版本)</span>
kubectl rollout undo deployment/my-dep --to-revision<span class="token operator">=</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>更多：</p> <p>除了Deployment，k8s还有 <code>StatefulSet</code> 、<code>DaemonSet</code> 、<code>Job</code>  等 类型资源。我们都称为 <code>工作负载</code>。</p> <p>有状态应用使用  <code>StatefulSet</code>  部署，无状态应用使用 <code>Deployment</code> 部署。</p> <p><img src="/assets/img/20211115075101.55788f45.png" alt="img"></p> <p>更多关于工作负载的学习，可以参照以下文档：</p> <p>https://kubernetes.io/zh/docs/concepts/workloads/controllers/</p> <h1 id="_5、service"><a href="#_5、service" class="header-anchor">#</a> 5、Service</h1> <p>将一组 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noopener noreferrer">Pods<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 公开为网络服务的抽象方法。</p> <p>有两种方式，将一组Deployment暴露为Service。</p> <p>第1种方式：命令方式</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#暴露Deploy</span>
kubectl expose deployment my-dep --port<span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第2种方式：yaml配置文件方式</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep <span class="token comment">#选择将有哪些标签的Pod进行暴露成一组Service</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>查询Service，可以获取到Service的IP地址。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查询Service</span>
kubectl get <span class="token function">service</span>
<span class="token comment">#删除Service</span>
kubectl delete svc my-dep
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行命令后，获取以下结果：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>    AGE
kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP    20d
my-dep       ClusterIP   <span class="token number">10.96</span>.225.110   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8000</span>/TCP   36s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后用该Service的IP:8000端口（<code>curl 10.96.225.110:8000</code>），就可以访问对应的Deployment中的80端口了。</p> <p>在集群内使用Service的IP:Port就可以负载均衡的访问Deployment，而且我们还可以Service域名的方式来访问。Service域名的规则为<code>服务名.所在命名空间.svc</code>。例如这里，我们就可以通过<code>curl my-dep.default.svc:8000</code>进行访问。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查询Pod的标签</span>
kubectl get pod --show-labels
<span class="token comment">#使用标签检索Pod</span>
kubectl get pod -l <span class="token assign-left variable">app</span><span class="token operator">=</span>my-dep
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_1、clusterip"><a href="#_1、clusterip" class="header-anchor">#</a> 1、ClusterIP</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#等同于没有--type的</span>
kubectl expose deployment my-dep --port<span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> --type<span class="token operator">=</span>ClusterIP

<span class="token comment">#配置文件的方式</span>
apiVersion: v1
kind: Service
metadata:
  labels:
    app: my-dep
  name: my-dep
spec:
  ports:
  - port: <span class="token number">8000</span>
    protocol: TCP
    targetPort: <span class="token number">80</span>
  selector:
    app: my-dep
  type: ClusterIP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><img src="/assets/img/20211121103348.91d2bf2c.png" alt="img"></p> <h2 id="_2、nodeport"><a href="#_2、nodeport" class="header-anchor">#</a> 2、NodePort</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#以NodePort方式暴露一组部署为Service</span>
kubectl expose deployment my-dep --port<span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> --type<span class="token operator">=</span>NodePort

<span class="token comment">#配置文件的方式</span>
apiVersion: v1
kind: Service
metadata:
  labels:
    app: my-dep
  name: my-dep
spec:
  ports:
  - port: <span class="token number">8000</span>
    protocol: TCP
    targetPort: <span class="token number">80</span>
  selector:
    app: my-dep
  type: NodePort
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>NodePort的端口范围在 30000-32767 之间</p></blockquote> <p>查看Service <code>kubectl get svc</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>          AGE
kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP          20d
my-dep       NodePort    <span class="token number">10.96</span>.225.110   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8000</span>:30948/TCP   43m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们会发现，本次Service还暴露出了一个30948端口（这个端口是随机的，而且也有范围的，就是在30000-32767之间）。此时我们不仅可以使用之前的ServiceIP:Port的方式访问（<code>curl 10.96.225.110:8000</code>），还可以访问该Service下任意Pod的IP:30948这种方式访问，都是可以的。</p> <p><img src="/assets/img/20211121185851.f1f216f7.png" alt="img"></p> <h1 id="_6、ingress"><a href="#_6、ingress" class="header-anchor">#</a> 6、Ingress</h1> <p>官网地址：https://kubernetes.github.io/ingress-nginx/</p> <p>Service的统一网关入口。</p> <p>Ingress就是nginx做的。</p> <h2 id="_1、安装"><a href="#_1、安装" class="header-anchor">#</a> 1、安装</h2> <p>下载Ingress的yaml配置文件，</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.47.0/deploy/static/provider/baremetal/deploy.yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果下载不到，就使用附录中的<a href="#Ingress-Config">这个文件</a>中的内容。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#修改配置文件中的镜像下载地址为阿里云地址，下载速度会比较快</span>
<span class="token function">vi</span> deploy.yaml
<span class="token comment">#将image的值改为如下值：</span>
registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images/ingress-nginx-controller:v0.46.0

<span class="token comment">#安装Ingress</span>
kubectl apply -f deploy.yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>安装完Ingress之后，会产生几个Pod以及两个Service。可以使用以下命令检查安装的结果：</p> <div class="language-ba line-numbers-mode"><pre class="language-text"><code>kubectl get pod,svc -n ingress-nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里需要着重注意的，就是产生的Service，我们可以使用<code>kubectl get svc -A</code>来查看，主要是看ingress-nginx这个Service，如下图所示：</p> <p><img src="/assets/img/20211121192554.015730a4.png" alt="img"></p> <p>该Service是以NodePort方式运行的，而且可以发现这里暴露出了<code>31405</code>这个端口。那么我们就可以使用浏览器在地址栏中输入 http://IP:31405  这个地址来访问了，如下图所示。可以看出Ingress其实就是基于Nginx来实现的。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAACoCAYAAADwxNf2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA8NSURBVHhe7d2/axtpHsdx/RlqDWkCV8SdXa4hRQxXrCDFGVIs5opgrjhEisOkMWKLIFIEV0G4WJCLBaVY8BUBpVmQi4BSBORiwSnCoeMCqyKFihTfm0czkufH95Ee2Zasb/R+wRd2o2dG0ih5PjPPzDNTEgAAYBIhDgCAUaX//Pd/QlEURVGUveJIHAAAowhxAACMIsQBADCKEAcAwChCHAAAowhxAACMIsQBADCKEAcAwChCHAAAowhxAACMIsQBADCKEAcAwChCHAAAowhxAACMIsQBADCKEAcAwChCHABW3OC8IfUX9Uw1zgfJq1hnhDjCDQcyGGRr+C15LcDwc1fab1Kd0UlL2h8u51rHNMPcZxsMhskr1zXMrS+peVZ7w222ujzbZlZ9TRbHXPqnFSmVSpmqnPaTV7HOCHEEGsjZ03KhI6mdJy9PMfjYlOqjjcKyk7q3K9XTXhQLN/ChLtv59T5uyo26uc9NqeTXmaz3Mmkyi9b5hmyzlefbNrPqqJOsAPMgxOFDiCOMFpJRzQqky98O1OW02o46+OsFub6DsbAQj6ryS1iMr1yIf+1L72P/ZjtMDiG+VIQ4fAhxBOhL83G2AxnXtEAanteCAzyusuz9On/H5N5nU1vfAkO8VN6T5qek3RSrEOLDT11pnVRlfysZDbnpdnEI8aUixOFDiGOmQXQ0Xc51IOPyB1JX6lvF9tv/aEj7oi/9izOpP1aG2MtVac913lR/n1EtMsSjKj+ZPax+5yGufQdC3BxCHD6EOKb72pHDB9nOI12+QBq82S+0LYbepTQeZdu4mqdzuvyl2LlNasEhHjJysF4hXhMiejEIcfgQ4phiKJ3nm4XOI116IGnD7ztyfJG8nDJ8W821iyo0ZD7NCNmFh3hU5T1pfU7aKwhx3AZCHD6EOLyGvx9mzjXvPtrNdCKu1EDqt2Qv1670sKEPPQ/O5CDftlSV9swrry6zOwrlXdl9mPp/VwsI8e0fK4Xz7+WnZ+KbsXuTEB9+6UknPSUvqcabjvS+TN9Ak+l2HxvFsP2xIb30tK/rTMVbWIgPZXDRkdZJ9jvXXzSkdd4Lmt4311RDZQqg1ry4zkHm4sDBxZk0Up/3+LQd/UbJiyGiz9F715Rjt/yzqlRH6+hIP3kTQhw+hDh0X9tSLac6ja2adN/WMp2IKzWQovDPtys993Xvl9LIh29pU+ofkpc9Ll+ndyjcsHanePS/iCPxo5ZyJXxZDn7TY/w6IT5zSl5SG4/r0la/YEdqSntvXWc73XqIRyF2WpXde/l15mtDKi/a0vfOtde+u/9zhYWjNrJUkaYbgfnSlsMflJkRo9qQ/ZNZUyeHo++9k/63lq7yjhy+HcglIQ4PQhyKvrSepDum7Sh4oq7oPCzEtfPU/g5nKO1n2bauqm/9Xd/wffaq9/hcu9LRLiTEozj4ciYH+U7Xc0HefCE+lO7LXe9FhHptRzsQ+TEOYyH+tSv1v/qC0FNbB3Kmzg5YYohfRO/lu6hyUuUpf5eH0jnaVpbJ165UnxHi0BHiKLg83csEyWT+dmCId46ybVz5jlQdrb23g/qa6zgnU72WGOKR/q/ZbeSq/Kwdb6eUeUI8v93DK9nJmrAU4pfSzOwwzlFb0fsVdpyWFeKbsr0V+Lkf6aeSrv97x0WIwyHEkVGY2+2G0cf5EBriz7NtfO3GwkM83+Gnrw5fboi798uOVrjalMPfszEeHOJ/NGQ3185V+YeqNM4vk/Owl9J9cyz72tHfgyioJm/tzq+2pe3q10PZybd9eCit8euu3l/j5i9qiG/I9sMd2fHVP88Kv0f2tMi4ylHbhnQ+Jeef3Tz3V/vqPQc2xzuYE8sK8bjSv4+bNllTRxR2pPFHsqoxbTTH1da+HP+7J333vfs9OXtRkY18m6QIcTiEOK7kp5Plb2gSFOJ6hzctxMM60qjDzw3TZ+/wtuwQj3xuyV6+I35wmDk6DAvxobT/Vez8vfPQ86MRSe2/UUY7tO9w0+3iqCE+o/LvO2zLYSHIoh2zU/Vbe24etC+tzAVkSwxxbSQgfy1JUvmRqMsTZecl93dnbPAue4HpuAhxOIQ4EtOOchMLCvGQc+hTRwhG7iDEI9qQaHrnIijEozCr5tq486CFo7cUbR5+SbtKfoVDXJ1e6Bl6jg2k9VOufVTZgFxeiKs7TZHOUXGHLLvO6N/aj9nXXfnW5/vehDgcQhyR4gU26n3MA0O89STbRm93ZeZw+qdm9ohXveXp3YR4cefH1bbU3sdbLyjEP9SLR1q+KXlj6hx5JaxWOMS7L4v3INh5PfVb6zf3yfwmywrxive2uzPXqe60HciZL8Mj810sinVCiK+9ofReZ48mvcO4QSGuh/K0q82nXgjnpvBkho7zF3GN3VWIR7RATUYKgkJc2a4l5SK5LC2slCBYaojvy3H6XHu+cufe5/17MqJtq8wIxBJD3HOTn5nr1Lbdg7p0k5c1YZ8T64gQX3dKh7KxpVyU5Gr8AA1f21dxN6QdYfk7HPcEsmxbN5Rfex+/Wujoy/eznylV9/PnIjNtq3I2b58XGuIR7Uhp+2VXnd8bFOKe97mihdWetPLfcakh7g9LjRbi00ZsRrRt9aSV+j5GQ3zGb0KIw4cQX3dqZ3zNSoLHTb/yvVbUlXrh3uxXYaR19Ncrf6frNUeIj4bVCx29Pr83KMSn3AVuRL3T3V0Pp988xKdNRXTcw3jyy2R/E6MhPuP0CcPp8CHE190CQnyuc7wzOjQ7IR7xTBPLVyHEo+UK08BmDK8Gb2PtO6xIiF++3sktX5LNl1O/dcB59MARikT351kXoTm3HOLabYmn3mpYvyESIQ6HEF93/TOppoakp1bgcPqoIy1Ms9GvttY6vHRH3n2VWv+Musvh9DF93nO2ikPG2vaafuvZ7otimKkBOGMn6dpuIcTdCEThZidTd160UZv8dgppMxb6FL1bDvHoMxZ/7ylXp39pyX6urStCHA4hjnDKsK/vHKYWMoUL5gbRDkRg2M+mdLQ3PeK8Roj7giFd2jbTttdoHrLSr+vzpT3bTT3qu+42TrmNEFcDN54ZUfzanluUFqak6bMjtIs1fXdMW3yI6/cFUGddfNNmP8RFiMMhxBFujhDXO3l3h6t9OX7TlrPTmlSUh10U78AValVCPPKhrt5dbFzqNtNuHOOqfF/2nh1L899tab9pyOHTXfUOXpvPfdtNP+or3atI9aQV/Q51OXiWvjAs0K2EePSrKbevdVX+y55UXzXl7F1bWieHcqA+EKZ4hzxHG6Z3tfHoQOqnZ/F2/PuO+r6uFh/iEe10iKvR790Y3VGvdVJV/42MixCHQ4gj3DwhHlHn9E4r7Q5YwVYoxCPdl/4HW/i2mX6EHVBTt5vnqC9d19lOtxTi3iPsgFLvZeB4diCLtS17T4qBv5QQd7/Lsxm/y6TKsr01z4wPrBNCHOHmDPFRB/2z/4gnU96nUoVarRAfDRV7nnA1bZsN3h76H0up1MZPDenN2vHxHeWP605D3BlI+3ng35NRzX7E5+yHi8S3dw17xOciQjwS9PS2suz83JFe6DqxdghxhJs7xGP9d8ey73vmshs+nPp86FCrFuLRLkzukanjmrnNBj1pHe0VL9RLlRsaPn4X/u2GF02p+n6DzDzrQLca4rHBx5bU/nZ/SvhuyO7TY88z1PPi53Srzye/V5H67/FZ97DAXVCIO9/60n7h+a3v7Ur1NN5ZmWudWCuEOJZmOOhL7/zqDl7dT4OpR1MYxk8uS7aXq85FXwY32GjDfk86k/VFR3j9FfwFhvGTy8bfOf6c1/27Em3Di85kXSv7d+7bUPoWPidWDiEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgFCEOAIBRhDgAAEYR4gAAGEWIAwBgVOn169dCURRFUZS9Kv35559CURRFUZS9YjgdAACjCHEAAIwixAEAMIoQBwDAKEIcAACjCHEAAIwixAEAMIoQBwDAKEIcAACjCHEAAIwixAEAMIoQBwDAKEIc+M51jkpSKtWkk/w/gO8HIQ585whx4PtFiAMAYBQhDgCAUYQ4sFL60nxcktLjpvTPa1IquaHwuGrnSZO0XJvKaedq+aRJYTg9WaZ2nrzXePnUMv3TStIm+YORjtRy7QDcLUIcWCmpYD26OosdB3FFmp+TP4hoQRu3ywatL8Qz6/vclErmPcef42o5zq0Dq4cQB1ZKMTxHkpCtnE6iOT4qTgV9rHi07Avxq3XFCu3S75n8tzoaAODOEOLASkkNpyd/EovDeRK8kyHx+H+vFJf3hXh+2fjIPrvzMP6zmltHYYcBwF0jxIGVMj3EJ0E6CuLs8HrspiGeX2fyvrlwB7AaCHFgpcwT4os4EtfPu4+KI3Fg5RDiwEoJDPHCOfLE+AK12wjx9Hlw704DgLtEiAMrJTDEI3E4p4M1Wda1u3GI5z/HeN0MqwOrhBAHVkp4iDvjII/LBXBx+euEeLxMdmh9cpTPsDqwMghx4LuShDhBC6wFQhz4njCfG1grhDhglBvyzoZ1MuReGIoH8L0ixAGzxhebpYphdGCtEOIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCAUYQ4AABGEeIAABhFiAMAYBQhDgCASSL/B8wsavD66sYaAAAAAElFTkSuQmCC" alt="img"></p> <blockquote><p>最后别忘记把svc暴露的端口要放行。</p></blockquote> <h2 id="_2、使用"><a href="#_2、使用" class="header-anchor">#</a> 2、使用</h2> <p><a href="https://139.198.163.211:31405/" target="_blank" rel="noopener noreferrer">http://139.198.163.211:31405/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://139.198.163.211:32401/" target="_blank" rel="noopener noreferrer">https://139.198.163.211:32401/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="测试环境"><a href="#测试环境" class="header-anchor">#</a> 测试环境</h3> <p>应用如下yaml，准备好测试环境</p> <p><code>ingress_test.yaml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
        <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/lfy_k8s_images/hello<span class="token punctuation">-</span>server
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9000</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">9000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p>这个测试环境的拓扑图如下所示：</p> <p><img src="/assets/img/20211121205528.b8716700.png" alt="img"></p> <h3 id="_1、域名访问"><a href="#_1、域名访问" class="header-anchor">#</a> 1、域名访问</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress  
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>host<span class="token punctuation">-</span>bar
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;hello.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;demo.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>这里要实现的效果，就如下图所示：</p> <p><img src="/assets/img/20211121205534.737c36f5.png" alt="img"></p> <p>访问hello.atguigu.com:31405时就由hello-server进行处理，而访问demo.atguigu.com:31405时就由nginx-demo来处理。</p> <p>接下来，我们可以稍微修改一下配置文件。在下面的host配置中的path由原来的<code>/</code>修改为<code>/nginx</code>:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress  
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>host<span class="token punctuation">-</span>bar
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;hello.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;demo.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/nginx&quot;</span>  <span class="token comment"># 把请求会转给下面的服务，下面的服务一定要能处理这个路径，不能处理就是404</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo  <span class="token comment">## java，比如使用路径重写，去掉前缀nginx</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>这里修改后的配置的意思，我们访问demo.atguigu.com:31405/nginx时，Ingress才能进行处理。</p> <p>但当我们访问：demo.atguigu.com:31405/nginx这个路径时，却出现了404错误。为什么呢？</p> <p>这是因为请求会先进入到Ingress网络，然后根据配置的规则，Ingress是能够处理<code>/nginx</code>这个请求的，于是就会将该请求分配给下面的Pod进行处理。而我们下面的这个部署有Ngxin的Pod接收到的是<code>***/nginx</code>这样的一个请求，并不是<code>***/</code>这样的请求，而我们的nginx下面是没有nginx这个资源的，所以会报404错误。</p> <h3 id="_2、路径重写"><a href="#_2、路径重写" class="header-anchor">#</a> 2、路径重写</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress  
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation">:</span> /$2
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>host<span class="token punctuation">-</span>bar
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;hello.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>server
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;demo.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/nginx(/|$)(.*)&quot;</span>  <span class="token comment"># 把请求会转给下面的服务，下面的服务一定要能处理这个路径，不能处理就是404</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo  <span class="token comment">## java，比如使用路径重写，去掉前缀nginx</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>最主要就是配置的注解中加入nginx.ingress.kubernetes.io/rewrite-target: /$2。</p> <p>这里的配置，就是将请求中的<code>nginx</code>这个前缀给去掉了。</p> <h3 id="_3、流量限制"><a href="#_3、流量限制" class="header-anchor">#</a> 3、流量限制</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>limit<span class="token punctuation">-</span>rate
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/limit-rps</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;haha.atguigu.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Exact
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>demo
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h1 id="_7、存储抽象"><a href="#_7、存储抽象" class="header-anchor">#</a> 7、存储抽象</h1> <h2 id="环境准备"><a href="#环境准备" class="header-anchor">#</a> 环境准备</h2> <p><strong>1、所有节点</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#所有机器安装</span>
yum <span class="token function">install</span> -y nfs-utils
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2、主节点</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#nfs主节点(命令的含义是主节点暴露/nfs/data/目录，星号是所有人都能同步，以非安全读写的方式。)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;/nfs/data/ *(insecure,rw,sync,no_root_squash)&quot;</span> <span class="token operator">&gt;</span> /etc/exports

<span class="token function">mkdir</span> -p /nfs/data
systemctl <span class="token builtin class-name">enable</span> rpcbind --now
systemctl <span class="token builtin class-name">enable</span> nfs-server --now
<span class="token comment">#配置生效</span>
exportfs -r

<span class="token comment">#检查暴露的目录</span>
exportfs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>3、从节点</strong></p> <p>下面的<code>172.31.0.4</code>这个IP地址，是nfs主节点的IP地址。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查看主节点机器上可挂载的目录</span>
showmount -e <span class="token number">172.31</span>.0.4

<span class="token comment">#执行以下命令挂载 nfs 服务器上的共享目录到本机路径 /nfs/data</span>
<span class="token function">mkdir</span> -p /nfs/data

<span class="token function">mount</span> -t nfs <span class="token number">172.31</span>.0.4:/nfs/data /nfs/data

<span class="token comment"># 写入一个测试文件</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;hello nfs server&quot;</span> <span class="token operator">&gt;</span> /nfs/data/test.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>4、原生方式数据挂载</strong></p> <p><code>deploy.yaml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pv<span class="token punctuation">-</span>demo
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pv<span class="token punctuation">-</span>demo
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pv<span class="token punctuation">-</span>demo
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pv<span class="token punctuation">-</span>demo
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/share/nginx/html
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
            <span class="token key atrule">server</span><span class="token punctuation">:</span> 172.31.0.4
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/nginx<span class="token punctuation">-</span>pv
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><blockquote><p>以上配置重要的点就是containers下的volumeMounts配置，意思是将mountPath这个nginx内部路径挂载到外边的一个叫html的挂载上，而这个html挂载的具体配置就是对应volumes下名为html的这个配置，这个挂载是以nfs方式挂载，其中就配置了nfs服务器的IP地址以及对应挂载路径。</p></blockquote> <h2 id="_1、pv-pvc"><a href="#_1、pv-pvc" class="header-anchor">#</a> 1、PV&amp;PVC</h2> <p><em>PV：持久卷（Persistent Volume），将应用需要持久化的数据保存到指定位置</em></p> <p><em>PVC：持久卷申明（<strong>Persistent Volume Claim</strong>），申明需要使用的持久卷规格</em></p> <h3 id="_1、创建pv池"><a href="#_1、创建pv池" class="header-anchor">#</a> 1、创建pv池</h3> <p>静态供应（静态供应的意思就是，我需要提前创建好固定空间的PV）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#nfs主节点</span>
<span class="token function">mkdir</span> -p /nfs/data/01
<span class="token function">mkdir</span> -p /nfs/data/02
<span class="token function">mkdir</span> -p /nfs/data/03
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>创建PV <code>pv.yaml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv01<span class="token punctuation">-</span>10m
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 10M
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/01
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 172.31.0.4
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv02<span class="token punctuation">-</span>1gi
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 1Gi
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/02
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 172.31.0.4
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv03<span class="token punctuation">-</span>3gi
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 3Gi
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/03
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 172.31.0.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><blockquote><p>以上yaml文件中配置了3个PV，大小分别是10M、1G、3G。</p> <p>创建好PV后，可以通过 kubectl get pv 命令来查看PV资源。</p></blockquote> <h3 id="_2、pvc创建与绑定"><a href="#_2、pvc创建与绑定" class="header-anchor">#</a> 2、PVC创建与绑定</h3> <p>创建PVC</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">requests</span><span class="token punctuation">:</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> 200Mi
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>storageClassName配置的nfs可不能乱写，而是要与创建PV时的storageClassName对应的。</p></blockquote> <p>创建Pod绑定PVC</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/share/nginx/html
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation">:</span>
            <span class="token key atrule">claimName</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><blockquote><p>这里配置的Deployment与原生配置挂载的不同就是，我们volumes下html这个挂载不再是nfs服务器的配置，而是配置了一个PVC的名字。</p></blockquote> <h2 id="_2、configmap"><a href="#_2、configmap" class="header-anchor">#</a> 2、ConfigMap</h2> <p>抽取应用配置，并且可以自动更新。</p> <h3 id="redis示例"><a href="#redis示例" class="header-anchor">#</a> redis示例</h3> <h4 id="_1、把之前的配置文件创建为配置集"><a href="#_1、把之前的配置文件创建为配置集" class="header-anchor">#</a> 1、把之前的配置文件创建为配置集</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建配置，redis保存到k8s的etcd；</span>
kubectl create cm redis-conf --from-file<span class="token operator">=</span>redis.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行完上一句命令，就会产生一个ConfigMap配置集。可以通过以下命令查看该配置集的内容：
<code>kubectl get cm redis-conf -oyaml</code></p> <p>主要的配置内容如下：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">data</span><span class="token punctuation">:</span>    <span class="token comment">#data是所有真正的数据，key：默认是文件名   value：配置文件的内容</span>
  <span class="token key atrule">redis.conf</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    appendonly yes</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>conf
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2、创建pod"><a href="#_2、创建pod" class="header-anchor">#</a> 2、创建Pod</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis<span class="token punctuation">-</span>server
      <span class="token punctuation">-</span> <span class="token string">&quot;/redis-master/redis.conf&quot;</span>  <span class="token comment">#指的是redis容器内部的位置</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
      <span class="token key atrule">name</span><span class="token punctuation">:</span> data
    <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /redis<span class="token punctuation">-</span>master
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> data
      <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> config
      <span class="token key atrule">configMap</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>conf
        <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> redis.conf
          <span class="token key atrule">path</span><span class="token punctuation">:</span> redis.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>可以通过下面这个图来理解下</p> <p><img src="/assets/img/20211217074836.dc3a46cb.png" alt="img"></p> <h4 id="_3、检查默认配置"><a href="#_3、检查默认配置" class="header-anchor">#</a> 3、检查默认配置</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">exec</span> -it redis -- redis-cli

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> CONFIG GET appendonly
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> CONFIG GET requirepass
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4、修改configmap"><a href="#_4、修改configmap" class="header-anchor">#</a> 4、修改ConfigMap</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>redis<span class="token punctuation">-</span>config
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis-config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    maxmemory 2mb
    maxmemory-policy allkeys-lru </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5、检查配置是否更新"><a href="#_5、检查配置是否更新" class="header-anchor">#</a> 5、检查配置是否更新</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">exec</span> -it redis -- redis-cli

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> CONFIG GET maxmemory
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> CONFIG GET maxmemory-policy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>检查指定文件内容是否已经更新</p> <p>修改了CM。Pod里面的配置文件会跟着变</p> <p>*<strong>配置值未更改，因为需要重新启动 Pod 才能从关联的 ConfigMap 中获取更新的值。*</strong></p> <p>*<strong>原因：我们的Pod部署的中间件自己本身没有热更新能力*</strong></p> <h2 id="_3、secret"><a href="#_3、secret" class="header-anchor">#</a> 3、Secret</h2> <p>Secret 对象类型用来保存敏感信息，例如密码、OAuth 令牌和 SSH 密钥。 将这些信息放在 secret 中比放在 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noopener noreferrer">Pod<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的定义或者 <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-image" target="_blank" rel="noopener noreferrer">容器镜像<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中来说更加安全和灵活。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#具体命令</span>
kubectl create secret docker-registry leifengyang-docker <span class="token punctuation">\</span>
--docker-username<span class="token operator">=</span>leifengyang <span class="token punctuation">\</span>
--docker-password<span class="token operator">=</span>Lfy123456 <span class="token punctuation">\</span>
--docker-email<span class="token operator">=</span><span class="token number">534096094</span>@qq.com

<span class="token comment">##命令格式</span>
kubectl create secret docker-registry regcred <span class="token punctuation">\</span>
  --docker-server<span class="token operator">=</span><span class="token operator">&lt;</span>你的镜像仓库服务器<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --docker-username<span class="token operator">=</span><span class="token operator">&lt;</span>你的用户名<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --docker-password<span class="token operator">=</span><span class="token operator">&lt;</span>你的密码<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --docker-email<span class="token operator">=</span><span class="token operator">&lt;</span>你的邮箱地址<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>通过以上命令我们就创建了一个Secret，我们也可以通过以下命令来查看目前已有的Secret都有哪些：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get secret
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>结果如下图所示</p> <p><img src="/assets/img/20211219063037.6deb3398.png" alt="img"></p> <p>我们也可以查看某个Secret的内容是什么，通过以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get secret leifengyang-docker -oyaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>结果如下所示：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">.dockerconfigjson</span><span class="token punctuation">:</span> eyJhdXRocyI6eyJodHRwczovL2luZGV4LmRvY2tlci5pby92MS8iOnsidXNlcm5hbWUiOiJsZWlmZW5neWFuZyIsInBhc3N3b3JkIjoiTGZ5MTIzNDU2IiwiZW1haWwiOiI1MzQwOTYwOTRAcXEuY29tIiwiYXV0aCI6ImJHVnBabVZ1WjNsaGJtYzZUR1o1TVRJek5EVTIifX19
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token string">&quot;2021-12-18T22:45:51Z&quot;</span>
  <span class="token key atrule">managedFields</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
    <span class="token key atrule">fieldsType</span><span class="token punctuation">:</span> FieldsV1
    <span class="token key atrule">fieldsV1</span><span class="token punctuation">:</span>
      <span class="token key atrule">f:data</span><span class="token punctuation">:</span>
        <span class="token key atrule">.</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:.dockerconfigjson</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token key atrule">f:type</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token key atrule">manager</span><span class="token punctuation">:</span> kubectl<span class="token punctuation">-</span>create
    <span class="token key atrule">operation</span><span class="token punctuation">:</span> Update
    <span class="token key atrule">time</span><span class="token punctuation">:</span> <span class="token string">&quot;2021-12-18T22:45:51Z&quot;</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> leifengyang<span class="token punctuation">-</span>docker
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;6130776&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> 8883ad63<span class="token punctuation">-</span>d4d7<span class="token punctuation">-</span>4b7c<span class="token punctuation">-</span>944a<span class="token punctuation">-</span>143ef1d588bf
<span class="token key atrule">type</span><span class="token punctuation">:</span> kubernetes.io/dockerconfigjson

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><blockquote><p>Secret中的内容主要就是在data中，是以key-value形式存放的，value的部分就是我们真正的数据，其实是经过Base64加密的，可以通过Base64解码工具进行测试。</p></blockquote> <p>接下来新建一个Pod来使用我们刚才创建的Secret，访问我们的私有仓库来下载镜像</p> <p><code>mypod.yaml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> private<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> private<span class="token punctuation">-</span>nginx
    <span class="token key atrule">image</span><span class="token punctuation">:</span> leifengyang/guignginx<span class="token punctuation">:</span>v1.0
  <span class="token key atrule">imagePullSecrets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> leifengyang<span class="token punctuation">-</span>docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <h4 id="安装ingress的配置文件"><a href="#安装ingress的配置文件" class="header-anchor">#</a> <a name="Ingress-Config">安装Ingress的配置文件</a></h4> <p><code>deploy.yaml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Namespace
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx

<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-serviceaccount.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">automountServiceAccountToken</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-configmap.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">data</span><span class="token punctuation">:</span>
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/clusterrole.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> configmaps
      <span class="token punctuation">-</span> endpoints
      <span class="token punctuation">-</span> nodes
      <span class="token punctuation">-</span> pods
      <span class="token punctuation">-</span> secrets
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nodes
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> services
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> extensions
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingresses
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> events
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> create
      <span class="token punctuation">-</span> patch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> extensions
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingresses/status
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> update
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingressclasses
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/clusterrolebinding.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-role.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> namespaces
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> configmaps
      <span class="token punctuation">-</span> pods
      <span class="token punctuation">-</span> secrets
      <span class="token punctuation">-</span> endpoints
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> services
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> extensions
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingresses
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> extensions
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingresses/status
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> update
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> networking.k8s.io   <span class="token comment"># k8s 1.14+</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingressclasses
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> configmaps
    <span class="token key atrule">resourceNames</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>leader<span class="token punctuation">-</span>nginx
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> update
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> configmaps
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> create
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> events
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> create
      <span class="token punctuation">-</span> patch
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-rolebinding.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-service-webhook.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>admission
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> https<span class="token punctuation">-</span>webhook
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> webhook
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-service.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> http
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> https
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> https
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/controller-deployment.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
      <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
      <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
  <span class="token key atrule">revisionHistoryLimit</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">minReadySeconds</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> controller
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">dnsPolicy</span><span class="token punctuation">:</span> ClusterFirst
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> controller
          <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/lfy_k8s_images/ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller<span class="token punctuation">:</span>v0.46.0
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
          <span class="token key atrule">lifecycle</span><span class="token punctuation">:</span>
            <span class="token key atrule">preStop</span><span class="token punctuation">:</span>
              <span class="token key atrule">exec</span><span class="token punctuation">:</span>
                <span class="token key atrule">command</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> /wait<span class="token punctuation">-</span>shutdown
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> /nginx<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>election<span class="token punctuation">-</span>id=ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>leader
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>class=nginx
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>configmap=$(POD_NAMESPACE)/ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>validating<span class="token punctuation">-</span>webhook=<span class="token punctuation">:</span><span class="token number">8443</span>
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>validating<span class="token punctuation">-</span>webhook<span class="token punctuation">-</span>certificate=/usr/local/certificates/cert
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>validating<span class="token punctuation">-</span>webhook<span class="token punctuation">-</span>key=/usr/local/certificates/key
          <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
            <span class="token key atrule">capabilities</span><span class="token punctuation">:</span>
              <span class="token key atrule">drop</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> ALL
              <span class="token key atrule">add</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> NET_BIND_SERVICE
            <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">101</span>
            <span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> POD_NAME
              <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
                <span class="token key atrule">fieldRef</span><span class="token punctuation">:</span>
                  <span class="token key atrule">fieldPath</span><span class="token punctuation">:</span> metadata.name
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> POD_NAMESPACE
              <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
                <span class="token key atrule">fieldRef</span><span class="token punctuation">:</span>
                  <span class="token key atrule">fieldPath</span><span class="token punctuation">:</span> metadata.namespace
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> LD_PRELOAD
              <span class="token key atrule">value</span><span class="token punctuation">:</span> /usr/local/lib/libmimalloc.so
          <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
            <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">5</span>
            <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
              <span class="token key atrule">path</span><span class="token punctuation">:</span> /healthz
              <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">10254</span>
              <span class="token key atrule">scheme</span><span class="token punctuation">:</span> HTTP
            <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>
            <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">3</span>
            <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
              <span class="token key atrule">path</span><span class="token punctuation">:</span> /healthz
              <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">10254</span>
              <span class="token key atrule">scheme</span><span class="token punctuation">:</span> HTTP
            <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
              <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> https
              <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">443</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webhook
              <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8443</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
          <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webhook<span class="token punctuation">-</span>cert
              <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/local/certificates/
              <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">resources</span><span class="token punctuation">:</span>
            <span class="token key atrule">requests</span><span class="token punctuation">:</span>
              <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
              <span class="token key atrule">memory</span><span class="token punctuation">:</span> 90Mi
      <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
        <span class="token key atrule">kubernetes.io/os</span><span class="token punctuation">:</span> linux
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
      <span class="token key atrule">terminationGracePeriodSeconds</span><span class="token punctuation">:</span> <span class="token number">300</span>
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webhook<span class="token punctuation">-</span>cert
          <span class="token key atrule">secret</span><span class="token punctuation">:</span>
            <span class="token key atrule">secretName</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/validating-webhook.yaml</span>
<span class="token comment"># before changing this value, check the required kubernetes version</span>
<span class="token comment"># https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#prerequisites</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> admissionregistration.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ValidatingWebhookConfiguration
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
<span class="token key atrule">webhooks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> validate.nginx.ingress.kubernetes.io
    <span class="token key atrule">matchPolicy</span><span class="token punctuation">:</span> Equivalent
    <span class="token key atrule">rules</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> networking.k8s.io
        <span class="token key atrule">apiVersions</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> v1beta1
        <span class="token key atrule">operations</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> CREATE
          <span class="token punctuation">-</span> UPDATE
        <span class="token key atrule">resources</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> ingresses
    <span class="token key atrule">failurePolicy</span><span class="token punctuation">:</span> Fail
    <span class="token key atrule">sideEffects</span><span class="token punctuation">:</span> None
    <span class="token key atrule">admissionReviewVersions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> v1
      <span class="token punctuation">-</span> v1beta1
    <span class="token key atrule">clientConfig</span><span class="token punctuation">:</span>
      <span class="token key atrule">service</span><span class="token punctuation">:</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>admission
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /networking/v1beta1/ingresses
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/serviceaccount.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade<span class="token punctuation">,</span>post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/clusterrole.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade<span class="token punctuation">,</span>post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> admissionregistration.k8s.io
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> validatingwebhookconfigurations
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> update
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/clusterrolebinding.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade<span class="token punctuation">,</span>post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/role.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade<span class="token punctuation">,</span>post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">''</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> secrets
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> create
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/rolebinding.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade<span class="token punctuation">,</span>post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/job-createSecret.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> batch/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Job
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission<span class="token punctuation">-</span>create
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> pre<span class="token punctuation">-</span>install<span class="token punctuation">,</span>pre<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission<span class="token punctuation">-</span>create
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
        <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
        <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
        <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create
          <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/jettech/kube<span class="token punctuation">-</span>webhook<span class="token punctuation">-</span>certgen<span class="token punctuation">:</span>v1.5.1
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> create
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>host=ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>admission<span class="token punctuation">,</span>ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>admission.$(POD_NAMESPACE).svc
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>namespace=$(POD_NAMESPACE)
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>secret<span class="token punctuation">-</span>name=ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> POD_NAMESPACE
              <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
                <span class="token key atrule">fieldRef</span><span class="token punctuation">:</span>
                  <span class="token key atrule">fieldPath</span><span class="token punctuation">:</span> metadata.namespace
      <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> OnFailure
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
      <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
        <span class="token key atrule">runAsNonRoot</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">2000</span>
<span class="token punctuation">---</span>
<span class="token comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/job-patchWebhook.yaml</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> batch/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Job
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission<span class="token punctuation">-</span>patch
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/hook</span><span class="token punctuation">:</span> post<span class="token punctuation">-</span>install<span class="token punctuation">,</span>post<span class="token punctuation">-</span>upgrade
    <span class="token key atrule">helm.sh/hook-delete-policy</span><span class="token punctuation">:</span> before<span class="token punctuation">-</span>hook<span class="token punctuation">-</span>creation<span class="token punctuation">,</span>hook<span class="token punctuation">-</span>succeeded
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission<span class="token punctuation">-</span>patch
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>3.33.0
        <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
        <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 0.47.0
        <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
        <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> admission<span class="token punctuation">-</span>webhook
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> patch
          <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/jettech/kube<span class="token punctuation">-</span>webhook<span class="token punctuation">-</span>certgen<span class="token punctuation">:</span>v1.5.1
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> patch
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>webhook<span class="token punctuation">-</span>name=ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>namespace=$(POD_NAMESPACE)
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>patch<span class="token punctuation">-</span>mutating=false
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>secret<span class="token punctuation">-</span>name=ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>patch<span class="token punctuation">-</span>failure<span class="token punctuation">-</span>policy=Fail
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> POD_NAMESPACE
              <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
                <span class="token key atrule">fieldRef</span><span class="token punctuation">:</span>
                  <span class="token key atrule">fieldPath</span><span class="token punctuation">:</span> metadata.namespace
      <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> OnFailure
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>admission
      <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
        <span class="token key atrule">runAsNonRoot</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">2000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/12/21 上午12:09:20</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/CloudNative/Kubernetes实战入门/Kubernetes基础概念.html" class="prev">
        1、Kubernetes是什么
      </a></span> <span class="next"><a href="/zh/CloudNative/KubeSphere平台安装/Kubernetes上安装KubeSphere.html">
        Kubernetes上安装KubeSphere
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fd7d1168.js" defer></script><script src="/assets/js/5.8188c8a3.js" defer></script><script src="/assets/js/34.8c034219.js" defer></script>
  </body>
</html>
